<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimating survival curves via structural transformation model — trSurvfit • tranSurv</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Estimating survival curves via structural transformation model — trSurvfit" />

<meta property="og:description" content="trSurvfit estimates survival curves under dependent truncation and independent censoring via a structural transformation model.
A structural transformation model for a latent, quasi-independent truncation time as a function of the observed dependent truncation time and the event time, and an unknown dependence parameter.
The dependence parameter is chosen to either minimize the absolute value of the restricted inverse probability weighted Kendall's tau or maximize the corresponding p-value.
The marginal distribution for the truncation time and the event time are completely left unspecified." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tranSurv</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.1.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/stc04003/tranSurv">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimating survival curves via structural transformation model</h1>
    <small class="dont-index">Source: <a href='http://github.com/stc04003/tranSurv/blob/master/R/trSurvfit.R'><code>R/trSurvfit.R</code></a></small>
    <div class="hidden name"><code>trSurvfit.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>trSurvfit</code> estimates survival curves under dependent truncation and independent censoring via a structural transformation model.
A structural transformation model for a latent, quasi-independent truncation time as a function of the observed dependent truncation time and the event time, and an unknown dependence parameter.
The dependence parameter is chosen to either minimize the absolute value of the restricted inverse probability weighted Kendall's tau or maximize the corresponding p-value.
The marginal distribution for the truncation time and the event time are completely left unspecified.</p>
    
    </div>

    <pre class="usage"><span class='fu'>trSurvfit</span>(<span class='no'>trun</span>, <span class='no'>obs</span>, <span class='kw'>delta</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>trans</span> <span class='kw'>=</span> <span class='st'>"linear"</span>, <span class='kw'>plots</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>covariate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>control</span> <span class='kw'>=</span> <span class='fu'><a href='trSurv.control.html'>trSurv.control</a></span>(), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>trun</th>
      <td><p>left truncation time satisfying <code>trun</code> &lt;= <code>obs</code>.</p></td>
    </tr>
    <tr>
      <th>obs</th>
      <td><p>observed failure time, must be the same length as <code>trun</code>, might be right-censored.</p></td>
    </tr>
    <tr>
      <th>delta</th>
      <td><p>an optional 0-1 vector of censoring indicator (0 = censored, 1 = event) for <code>obs</code>.
If this vector is not specified, <code>condKendall</code> assumes no censoring and all observed failure time
denote events.</p></td>
    </tr>
    <tr>
      <th>trans</th>
      <td><p>a character string specifying the transformation structure. The following are permitted:</p><dl class='dl-horizontal'>
  <dt>linear</dt><dd><p>linear transformation structure,</p></dd>
  <dt>log</dt><dd><p>log-linear transformation structure,</p></dd>
  <dt>exp</dt><dd><p>exponential transformation structure.</p></dd>
</dl></td>
    </tr>
    <tr>
      <th>plots</th>
      <td><p>an optional logical value; if TRUE, a series of diagnostic plots as well as the survival curve for the observed failure time will be plotted.</p></td>
    </tr>
    <tr>
      <th>covariate</th>
      <td><p>an optional logical value; if TRUE, covariates will be included in the output data.frame <code>qind</code>.</p></td>
    </tr>
    <tr>
      <th>control</th>
      <td><p>controls lower and upper bounds when <code>trans</code> is an user specified function.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>for future methods.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The output contains the following components:</p><dl class='dl-horizontal'>
  <dt>Sy</dt><dd><p>estimated survival function at the (ordered) observed points.</p></dd>
  <dt>byTau</dt><dd><p>a list contains the estimator of transformation parameter:
    <code>par</code> is the best set of transformation parameter found;
    <code>obj</code> is the value of the inverse probability weighted Kendall's tau corresponding to 'par'.</p></dd> 
  <dt>byP</dt><dd><p>a list contains the estimator of transformation parameter:
    <code>par</code> is the best set of transformation parameter found;
    <code>obj</code> is the value of the inverse probability weighted Kendall's tau corresponding to 'par'.</p></dd>
  <dt>qind</dt><dd><p>a data frame consists of two quasi-independent variables:
    <code>trun</code> is the transformed truncation time; 
    <code>obs</code> is the corresponding uncensored failure time.</p></dd>
</dl>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The structure of the transformation model is of the form:
$$h(U) = (1 + a)^-1 * (h(T) + ah(X)),$$ where T is the truncation time, X is the observed failure time,
U is the transformed truncation time that is quasi-independent from X and h(.) is a monotonic transformation function.
The condition, T &lt; X, is assumed to be satisfied.
The quasi-independent truncation time, U, is obtained by inverting the test for quasi-independence by either minimizing
the absolute value of the restricted inverse probability weighted Kendall's tau or maximize the corresponding p-value.</p>
<p>At the current version, three transformation structures can be specified. <code>trans = "linear"</code> corresponds to $$h(X) = 1$$;
<code>trans = "log"</code> corresponds to $$h(X) = log(X)$$;
<code>trans = "exp"</code> corresponds to $$h(X) = exp(X)$$.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Martin E. and Betensky R. A. (2005), Testing quasi-independence of failure and truncation times via conditional Kendall's tau,
<em>Journal of the American Statistical Association</em>, <b>100</b> (470): 484-492.</p>
<p>Austin, M. D. and Betensky R. A. (2014), Eliminating bias due to censoring in Kendall's tau estimators for quasi-independence of truncation and failure,
<em>Computational Statistics &amp; Data Analysis</em>, <b>73</b>: 16-26.</p>
<p>Chiou, S., Austin, M., Qian, J. and Betensky R. A. (2016), Transformation model estimation of survival under dependent truncation and independent censoring, an unpublished manuscript.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Generate simulated data from a transformation model</span>
<span class='no'>datgen</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>n</span>) {
    <span class='no'>a</span> <span class='kw'>&lt;-</span> -<span class='fl'>0.3</span>
    <span class='no'>X</span> <span class='kw'>&lt;-</span> <span class='fu'>rweibull</span>(<span class='no'>n</span>, <span class='fl'>2</span>, <span class='fl'>4</span>) <span class='co'>## failure times</span>
    <span class='no'>U</span> <span class='kw'>&lt;-</span> <span class='fu'>rweibull</span>(<span class='no'>n</span>, <span class='fl'>2</span>, <span class='fl'>1</span>) <span class='co'>## latent truncation time</span>
    <span class='no'>T</span> <span class='kw'>&lt;-</span> (<span class='fl'>1</span> + <span class='no'>a</span>) * <span class='no'>U</span> - <span class='no'>a</span> * <span class='no'>X</span> <span class='co'>## apply transformation</span>
    <span class='no'>C</span> <span class='kw'>&lt;-</span> <span class='fl'>10</span> <span class='co'>## censoring</span>
    <span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(<span class='kw'>trun</span> <span class='kw'>=</span> <span class='no'>T</span>, <span class='kw'>obs</span> <span class='kw'>=</span> <span class='fu'>pmin</span>(<span class='no'>X</span>, <span class='no'>C</span>), <span class='kw'>delta</span> <span class='kw'>=</span> <span class='fl'>1</span> * (<span class='no'>X</span> <span class='kw'>&lt;=</span> <span class='no'>C</span>))
    <span class='fu'>return</span>(<span class='fu'>subset</span>(<span class='no'>dat</span>, <span class='no'>trun</span> <span class='kw'>&lt;=</span> <span class='no'>obs</span>))
}

<span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>datgen</span>(<span class='fl'>300</span>)
<span class='no'>fit</span> <span class='kw'>&lt;-</span> <span class='fu'>with</span>(<span class='no'>dat</span>, <span class='fu'>trSurvfit</span>(<span class='no'>trun</span>, <span class='no'>obs</span>, <span class='no'>delta</span>))
<span class='no'>fit</span></div><div class='output co'>#&gt; 
#&gt;  Fitting structural transformation model 
#&gt; 
#&gt;  Call: trSurvfit(trun = trun, obs = obs, delta = delta)
#&gt; 
#&gt;  Conditional Kendall's tau = 0.5145 , p-value = 0
#&gt;  Restricted inverse probability weighted Kendall's tau = 0.5126 , p-value = 0
#&gt;  Transformation parameter by minimizing absolute value of Kendall's tau: -0.2847
#&gt;  Transformation parameter by maximizing p-value of the test: -0.2847 
#&gt; </div><div class='input'>
<span class='co'>## Checking the transformation parameter</span>
<span class='no'>fit</span>$<span class='no'>byTau</span>$<span class='no'>par</span></div><div class='output co'>#&gt; [1] -0.2847304</div><div class='input'><span class='no'>fit</span>$<span class='no'>byTau</span>$<span class='no'>obj</span></div><div class='output co'>#&gt; [1] 2.748234e-05</div><div class='input'><span class='fu'>with</span>(<span class='no'>dat</span>, <span class='fu'><a href='condKendall.html'>condKendall</a></span>(<span class='no'>trun</span>, <span class='no'>obs</span>, <span class='no'>delta</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"IPW2"</span>, <span class='kw'>a</span> <span class='kw'>=</span> <span class='no'>fit</span>$<span class='no'>byTau</span>$<span class='no'>par</span>[<span class='fl'>1</span>]))$<span class='no'>PE</span></div><div class='output co'>#&gt; [1] 2.748234e-05</div><div class='input'>
<span class='no'>fit</span>$<span class='no'>byP</span>$<span class='no'>par</span></div><div class='output co'>#&gt; [1] -0.2847304</div><div class='input'><span class='no'>fit</span>$<span class='no'>byP</span>$<span class='no'>obj</span></div><div class='output co'>#&gt; [1] 0.9994397</div><div class='input'><span class='fu'>with</span>(<span class='no'>dat</span>, <span class='fu'><a href='condKendall.html'>condKendall</a></span>(<span class='no'>trun</span>, <span class='no'>obs</span>, <span class='no'>delta</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"IPW2"</span>, <span class='kw'>a</span> <span class='kw'>=</span> <span class='no'>fit</span>$<span class='no'>byP</span>$<span class='no'>par</span>[<span class='fl'>1</span>]))$<span class='no'>p.value</span></div><div class='output co'>#&gt; [1] 0.9994397</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sy Han (Steven) Chiou.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

